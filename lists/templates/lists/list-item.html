{% load lists_extras %}
{% load icon %}
<li id="list-item-{{ item.pk }}" data-item-pk="{{ item.pk }}" data-list-pk="{{ list_pk }}" class="list-item {% if item.completed %}completed{% endif %}">
    <div class="li-internal">
        <div class="li-left">
            <h2>{{ item.name }}<button class="edit-button" hx-get="{% url 'item-edit' item_pk=item.pk %}" hx-select="form" hx-target="closest h2" hx-swap="outerHTML">{% icon "edit-3" %}</button></h2>
            <div class="li-button-container">
                <button hx-trigger="click" hx-get="{% url 'item-edit' %}" hx-select=".new-item-form-container" hx-swap="outerHTML">New sub-item</button>
                <div class="li-buttons-right">
                    {% for list in request.user.starred.filter %}
                        {% if list in item.list.filter %}
                            {% include 'lists/quick-access-list-button.html' with enabled=False current_list=current_list.pk list=list item=item %}
                        {% else %}
                            {% include 'lists/quick-access-list-button.html' with enabled=True current_list=current_list.pk list=list item=item %}
                        {% endif %}
{#                    {% quick_access_list_button request=request list=list item=item current_list=list.pk %}#}
                {% endfor %}
                </div>
            </div>
        </div>
{#        <button id="list-details-button{{ item.pk }}" class="check" hx-trigger="click" hx-get="{% url 'item-details' item_pk=item.pk list_pk=list_pk %}" hx-target="closest .li-internal" hx-swap="afterend">#}
{#            {% icon "menu" %}#}
{#        </button>#}
        <button class="check" _="on click toggle .details on #list-item-{{ item.pk }}">
            {% icon "menu" %}
        </button>
        <button class="check" hx-trigger="click" hx-get="{% url 'toggle-item' item=item.pk list_pk=list_pk %}" hx-select="#listdisplay" hx-target="closest #listdisplay" hx-swap="outerHTML">
            {% if item.completed %}
                {% icon "check-square" %}
            {% else %}
                {% icon "square" %}
            {% endif %}
        </button>
    </div>
    <div id="item-details-{{ item.pk }}" class="li-internal" hx-trigger="revealed" hx-get="{% url "item-details" item_pk=item.pk %}">
    <h2>Item Details</h2>
    </div>
    <ul>
    {% for child_item in item.children.filter %}
        {% include 'lists/list-item.html' with list_pk=list_pk item=child_item quick_access=quick_access %}
    {% endfor %}
    </ul>
</li>